const bestScore=document.getElementById("best-score"),currentScore=document.getElementById("current-score"),canvas=document.getElementById("game"),ctx=canvas.getContext("2d"),bg=new Image(400,400);bg.src="../static/img/field.png";const blockSize=25;let direction,score=0,speed=150;bestScore.textContent="Your best score is "+localStorage.getItem("bestScore");const foodTypes=[];for(let e=1;e<=3;e++){let t=new Image(25,25);t.src=`../static/img/food${e}.png`,foodTypes.push(t)}let food={x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random()),img:foodTypes[Math.floor(Math.random()*foodTypes.length)]};const snake=[];function generateFood(){let e={x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random()),img:foodTypes[Math.floor(Math.random()*foodTypes.length)]};return console.log(e.x,e.y),emptySpaceCheck(e.x,e.y)?e:generateFood()}function emptySpaceCheck(e,t){for(let o=0;o<snake.length;o++)if(e==snake[o].x&&t==snake[o].y)return!1;return!0}function move(){let e=snake[0].x,t=snake[0].y;"left"===direction&&(wallChecking(direction)?e=15:e-=1),"up"===direction&&(wallChecking(direction)?t=15:t-=1),"right"===direction&&(wallChecking(direction)?e=0:e+=1),"down"===direction&&(wallChecking(direction)?t=0:t+=1),snake.pop();let o={x:e,y:t};snake.unshift(o)}function wallChecking(e){switch(e){case"left":if(0===snake[0].x)return!0;break;case"up":if(0===snake[0].y)return!0;break;case"right":if(15===snake[0].x)return!0;break;case"down":if(15===snake[0].y)return!0}}function snakeGrow(){snake.push({})}function eat(){snake[0].x===food.x&&snake[0].y===food.y&&(score+=1,food=generateFood(),snakeGrow(),updateScore())}function updateScore(){currentScore.textContent="Score: "+score}function deathCheck(){for(let e=1;e<=snake.length-1;e++)snake[0].x===snake[e].x&&snake[0].y===snake[e].y&&gameOver()}function gameOver(){clearInterval(game),localStorage.getItem("bestScore")<score&&localStorage.setItem("bestScore",score),ctx.fillStyle="#8B0000",ctx.font="48px Roboto",ctx.fillText("Game over",100,150),ctx.fillText("Your score: "+score,75,250)}function drawGame(){ctx.drawImage(bg,0,0),ctx.drawImage(food.img,25*food.x+1,25*food.y,22,22);for(let e=0;e<snake.length;e++)ctx.fillStyle="blue",ctx.fillRect(25*snake[e].x,25*snake[e].y,24,24);move(),eat(),deathCheck()}snake[0]={x:8,y:8},document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":"right"!==direction&&(direction="left");break;case"ArrowUp":"down"!==direction&&(direction="up");break;case"ArrowRight":"left"!==direction&&(direction="right");break;case"ArrowDown":"up"!==direction&&(direction="down")}});let game=setInterval(drawGame,speed);