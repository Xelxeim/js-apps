const canvas=document.getElementById("game"),ctx=canvas.getContext("2d"),bg=new Image(400,400);bg.src="../static/img/field.png";const blockSize=25;let direction,score=0;const foodTypes=[];for(let e=1;e<=3;e++){let o=new Image(25,25);o.src=`../static/img/food${e}.png`,foodTypes.push(o)}let food={x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random()),img:foodTypes[Math.floor(Math.random()*foodTypes.length)]};const snake=[];function generateFood(){return{x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random()),img:foodTypes[Math.floor(Math.random()*foodTypes.length)]}}function move(){let e=snake[0].x,o=snake[0].y;"left"===direction&&(wallChecking(direction)?e=15:e-=1),"up"===direction&&(wallChecking(direction)?o=15:o-=1),"right"===direction&&(wallChecking(direction)?e=0:e+=1),"down"===direction&&(wallChecking(direction)?o=0:o+=1),snake.pop();let n={x:e,y:o};snake.unshift(n)}function wallChecking(e){switch(e){case"left":if(0===snake[0].x)return!0;break;case"up":if(0===snake[0].y)return!0;break;case"right":if(15===snake[0].x)return!0;break;case"down":if(15===snake[0].y)return!0}}function snakeGrow(){snake.push({})}function eat(){snake[0].x===food.x&&snake[0].y===food.y&&(score+=1,food=generateFood(),snakeGrow())}function deathCheck(){for(let e=1;e<=snake.length-1;e++)snake[0].x===snake[e].x&&snake[0].y===snake[e].y&&console.log("Game over")}function drawGame(){ctx.drawImage(bg,0,0),ctx.drawImage(food.img,25*food.x+1,25*food.y,22,22);for(let e=0;e<snake.length;e++)ctx.fillStyle="blue",ctx.fillRect(25*snake[e].x,25*snake[e].y,24,24);move(),eat(),deathCheck()}snake[0]={x:8,y:8},document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":"right"!==direction&&(direction="left");break;case"ArrowUp":"down"!==direction&&(direction="up");break;case"ArrowRight":"left"!==direction&&(direction="right");break;case"ArrowDown":"up"!==direction&&(direction="down")}});let game=setInterval(drawGame,150);